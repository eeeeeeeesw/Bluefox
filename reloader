-- Reload and Kick script

local chatBotPrefix = "!"
local allowedUserIDs = {2236295191, 1683659347, 555555555} -- Add the User IDs allowed to run the commands
local protectedUserIDs = {2236295191, 555555555} -- Add the User IDs to protect from kicking

local function sendReloadMessageToChatBot(player)
    local reloadMessage = "Forced reloaded"
    game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(reloadMessage, "All")
end

local function kickPlayerByUsername(player, username)
    local targetPlayer = game.Players:FindFirstChild(username)

    if targetPlayer then
        local targetUserID = targetPlayer.UserId

        -- Check if the target player is protected
        if table.find(protectedUserIDs, targetUserID) then
            print("Cannot kick protected player.")
        else
            targetPlayer:Kick("You have been kicked by " .. player.Name)
        end
    else
        print("Player not found!")
    end
end

local function isUserAllowedToRunCommands(userID)
    return table.find(allowedUserIDs, userID)
end

local function onChatted(player, message)
    local lowercaseMessage = string.lower(message)
    if lowercaseMessage:sub(1, 1) == chatBotPrefix then
        local command, argument = lowercaseMessage:match("(%w+)%s*(.*)")

        if command == "reload" then
            if isUserAllowedToRunCommands(player.UserId) then
              loadstring(game:HttpGet("https://raw.githubusercontent.com/OhDaddyUwu/The-Bleufox-Script/main/Script"))()
  sendReloadMessageToChatBot(player)
            else
                print("no")
            end
        elseif command == "kick" then
            if argument ~= "" then
                if player.Name == argument then
                    player:Kick("You have been kicked by yourself.")
                else
                    kickPlayerByUsername(player, argument)
                end
            else
                print("Usage: !kick <playerUsername>")
            end
        end
    end
end

for _, player in ipairs(game.Players:GetPlayers()) do
    player.Chatted:Connect(function(msg)
        onChatted(player, msg)
    end)
end
