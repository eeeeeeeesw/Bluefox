-- Reload and Kick script

local chatBotPrefix = "!"
local allowedUserID = 2236295191  -- Replace with the desired User ID

local function sendReloadMessageToChatBot(player)
    local reloadMessage = "Tested"
    game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(reloadMessage, "All")
end

local function kickPlayerByUsername(player, username)
    local targetPlayer = game.Players:FindFirstChild(username)

    if targetPlayer then
        targetPlayer:Kick("You have been kicked by " .. player.Name)
    else
        print("Player not found!")
    end
end

local function onChatted(player, message)
    local lowercaseMessage = string.lower(message)
    if lowercaseMessage:sub(1, 1) == chatBotPrefix then
        local command, argument = lowercaseMessage:match("(%w+)%s*(.*)")

        if command == "reload" then
            if player.UserId == allowedUserID then
                sendReloadMessageToChatBot(player)
            else
                print("no")
            end
        elseif command == "kick" then
            if argument ~= "" then
                if player.Name == argument then
                    player:Kick("You have been kicked by yourself.")
                else
                    kickPlayerByUsername(player, argument)
                end
            else
                print("Usage: !kick <playerUsername>")
            end
        end
    end
end

for _, player in ipairs(game.Players:GetPlayers()) do
    player.Chatted:Connect(function(msg)
        onChatted(player, msg)
    end)
end
